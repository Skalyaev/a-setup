#!/bin/bash
name="theHarvester"
dst="$HOME/.local/src/$name"
if [[ ! -e "$dst" ]];then
    echo -e\
        "\r[$YELLOW WRN $NC] $dst not found,$BLUE installing$NC..."
    bash "install.sh"
    exit 0
fi
cd "$dst" || exit 1

ret="$(git status)"
if [[ "$?" -ne 0 ]];then exit 1;fi
if grep -q "Votre branche est Ã  jour" <<< "$ret"\
    || grep -q "Your branch is up to date" <<< "$ret"
then
    exit 0
fi

echo -e "\r${BLUE}updating$NC $pkg..."
git pull

while read line;do
    [[ "$line" ]] || continue
    line="$(cut -d"=" -f1 <<< "$line")"

    pip show "$line" &>"/dev/null" && continue
    pip install "$line" || exit 1
done<"requirements/base.txt"
