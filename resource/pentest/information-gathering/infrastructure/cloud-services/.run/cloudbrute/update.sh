#!/bin/bash
name="cloudbrute"
dst="$HOME/.local/src/$name"
if [[ ! -e "$dst" ]];then
    echo -e\
        "\r[$YELLOW WRN $NC] $dst not found,$BLUE installing$NC..."
    bash "install.sh"
    exit 0
fi
cd "$dst" || exit 1
echo -ne "\r${BLUE}updating$NC $pkg..."

ret="$(git pull)"
if [[ "$?" -ne 0 ]];then exit 1;fi
if grep -q "Already up to date" <<< "$ret"\
    || grep -q "Déjà à jour" <<< "$ret"
then
    echo -ne "\r$pkg "
    exit 0
fi
cd "zipped"
wget "https://github.com/0xsha/CloudBrute/releases/download/v1.0.7/cloudbrute_1.0.7_Linux_x86_64.tar.gz" -O "$name.tar.gz" &>"/dev/null" || exit 1
tar -xvf "$name.tar.gz" && rm "$name.tar.gz"
ln -s "$dir/$name" "$HOME/.local/bin/$name"
